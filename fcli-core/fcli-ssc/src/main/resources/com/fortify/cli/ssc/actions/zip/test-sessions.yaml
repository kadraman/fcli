# yaml-language-server: $schema=https://fortify.github.io/fcli/schemas/action/fcli-action-schema-dev-2.x.json

author: Fortify
usage:
  header: Test shared sessions
  description: |
    TODO

config:
  rest.target.default: ssc
  output: immediate
  session.from-env.output: show
  
steps:
    - rest.call:
          apps:
            uri: /api/v1/projects
            records.for-each:
              record.var-name: app
              do:
                - out.write:
                    stdout: ${app}
          ping:
            uri: /rest/v2/ping
            target: sc-sast
    - out.write:
        stdout: ${ping}
    - run.fcli:
        ci:
          cmd: fcli ssc action run test-ci
          stdout.parse: json
    - out.write:
        stdout: 'ci.x: ${ci.x}'
      
