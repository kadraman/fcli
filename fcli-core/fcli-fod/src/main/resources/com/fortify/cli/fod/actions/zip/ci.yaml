# yaml-language-server: $schema=https://fortify.github.io/fcli/schemas/action/fcli-action-schema-dev-2.x.json

author: Fortify
usage:
  header: Run FoD CI pipeline
  description: |
    (Work in progress)
    This action can be used to run a full, standardized CI pipeline that performs the
    following activities:
    - Create & configure FoD application release if needed
    - Package source code
    - Submit SAST scan request
    - Wait for SAST scan completion
    - Perform post-scan activities, like checking policy outcome, exporting results, ...
    
    Configuration for this fcli action is done through environment variables; the
    table below lists the environment variables supported by this action.
                
    ${#include('/ci-envvars-fod.ci'+(isAsciiDoc?'.adoc':'.txt'))}

config:
  output: immediate
  rest.target.default: fod
  
steps:
  - run.fcli:
      ci-vars: ${#actionCmd('CI_VARS', 'fod', 'ci-vars')}
  - log.info: "After running ci-vars action: global.ci.x: ${global.ci.x}"
      